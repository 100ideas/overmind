import { merge, namespaced } from './config'

describe('Config', () => {
  test('should merge configs', () => {
    const configA = {
      state: {
        foo: 'bar',
      },
    }
    const configB = {
      state: {
        bar: 'baz',
      },
    }
    const merged = merge(configA, configB)

    expect(merged.state.foo).toEqual('bar')
    expect(merged.state.bar).toEqual('baz')
  })
  test('should namespace', () => {
    const configA = {
      state: {
        foo: 'bar',
      },
    }
    const configB = {
      state: {
        bar: 'baz',
      },
    }
    const merged = namespaced({ configA, configB })

    expect(merged.state.configA.foo).toEqual('bar')
    expect(merged.state.configB.bar).toEqual('baz')
  })
  test('should merge normal and namespaced', () => {
    const configA = {
      state: {
        foo: 'bar',
      },
    }
    const configB = {
      state: {
        bar: 'baz',
      },
    }
    const merged = merge(configA, namespaced({ configB }))

    expect(merged.state.foo).toEqual('bar')
    expect(merged.state.configB.bar).toEqual('baz')
  })
})
