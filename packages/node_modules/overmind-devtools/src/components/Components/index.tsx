import * as React from 'react'
import { connect, Connect } from '../../app'
import Text from '../common/Text'
import Table, { Row, Cell } from '../common/Table'
import Pill from '../common/Pill'
import { Wrapper, Panels, Panel } from './elements'

const Components: React.SFC<Connect> = ({ app }) => (
  <Wrapper>
    <div>
      <Panels>
        <Panel>
          <Text variant="label" dense>
            connected
          </Text>
          <Text variant="header" dense>
            {app.state.componentsMounted.length}
          </Text>
        </Panel>
        <Panel>
          <Text variant="label" dense>
            update count
          </Text>
          <Text variant="header" dense>
            {app.state.componentsUpdateCount}
          </Text>
        </Panel>
        <Panel>
          <Text variant="label" dense>
            paths watched
          </Text>
          <Text variant="header" dense>
            {app.state.componentsStatePathCount}
          </Text>
        </Panel>
      </Panels>
    </div>
    <Table headers={['name', 'updates', 'values']}>
      {app.state.componentsMounted.map((component) => {
        return (
          <Row key={component.id}>
            <Cell>{component.name}</Cell>
            <Cell>
              <Text variant="title" dense>
                {component.updateCount}
              </Text>
            </Cell>
            <Cell>
              {component.paths.map((path) => <Pill key={path}>{path}</Pill>)}
            </Cell>
          </Row>
        )
      })}
    </Table>
  </Wrapper>
)

export default connect(Components)
