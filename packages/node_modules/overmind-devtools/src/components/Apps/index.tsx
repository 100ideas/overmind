import { h, Component, useOvermind } from 'overmind-components'
import { getAppShortName, nameToColor } from '../../app/utils'
import * as styles from './styles'
import { css } from 'emotion'

const Apps: Component = () => {
  const { state, actions } = useOvermind()
  return (
    <div className={styles.wrapper}>
      <div
        className={styles.currentApp(nameToColor(state.currentAppName))}
        onClick={actions.toggleShowApps}
      >
        {getAppShortName(state.currentAppName)}
      </div>
      {state.showApps
        ? [
            <div className={styles.overlay} onClick={actions.toggleShowApps} />,
            <div className={styles.appsList}>
              {Object.keys(state.apps).map((appName) => (
                <div
                  className={css(
                    styles.app,
                    state.currentAppName === appName && styles.appSelected
                  )}
                  key={appName}
                  onClick={() => actions.selectApp(appName)}
                >
                  {appName}
                </div>
              ))}
            </div>,
          ]
        : null}
    </div>
  )
}

export default Apps
