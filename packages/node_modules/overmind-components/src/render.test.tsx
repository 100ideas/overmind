import { Overmind } from 'overmind'
import { mockDocument } from './mockDocument'
import { h, render } from './'

describe('RENDER', () => {
  test('should create element', () => {
    mockDocument((target, updates) => {
      const app = new Overmind({})

      render(app, <div id="child" />, target)
      expect(updates).toMatchSnapshot()
      expect(target.innerHTML).toMatchSnapshot()
    })
  })
  test('should create nested element', () => {
    mockDocument((target, updates) => {
      const app = new Overmind({})

      render(
        app,
        <div id="div">
          <span id="span" />
        </div>,
        target
      )
      expect(updates).toMatchSnapshot()
      expect(target.innerHTML).toMatchSnapshot()
    })
  })
  test('should render component', () => {
    mockDocument((target, updates) => {
      const app = new Overmind({})
      const TestComp = () => {
        return <div id="componentDiv" />
      }
      render(app, <TestComp />, target)
      expect(updates).toMatchSnapshot()
      expect(target.innerHTML).toMatchSnapshot()
    })
  })
  test('should render NULL component', () => {
    mockDocument((target, updates) => {
      const app = new Overmind({})
      const TestComp = () => {
        return null
      }
      render(app, <TestComp />, target)

      expect(updates).toMatchSnapshot()
      expect(target.innerHTML).toMatchSnapshot()
    })
  })
})
