import { IProxyStateTree } from './'
import { scopeState } from './proxify'

export interface IMutation {
  method: string
  path: string
  args: any[]
}

const cache = []

export class TrackMutationTree<T extends object> {
  private master: IProxyStateTree
  state: T
  constructor(state: T) {
    this.state = cache.pop() || scopeState(this, state)
  }
  dispose() {
    cache.push(this)
  }
}
